<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 2: Computational Thinking - AI Literacy Training</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="../../css/modules.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1>Module 2: Computational Thinking</h1>
            </div>
            <div class="nav-user">
                <button class="back-btn" onclick="moduleManager.goBack()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M12 5L7 10L12 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Back to Dashboard
                </button>
            </div>
        </div>
    </nav>

    <div class="module-page">
        <div class="module-content">
            <div class="module-header-detail">
                <div class="module-header-top">
                    <div>
                        <h2>Computational Thinking</h2>
                        <p>Master pattern recognition and algorithm design for AI education</p>
                    </div>
                    <div class="module-stats">
                        <span>Duration: 2 hours</span>
                        <span>Progress: <span class="progress-text">0%</span></span>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill module-progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div class="module-flow">
                <!-- Video 1 -->
                <div class="content-section">
                    <div class="video-section">
                        <div class="video-player">
                            <div class="play-btn">
                                <svg width="30" height="30" viewBox="0 0 30 30" fill="none">
                                    <path d="M10 7L22 15L10 23V7Z" fill="currentColor"/>
                                </svg>
                            </div>
                        </div>
                        <div class="video-info">
                            <h3 class="video-title">Introduction to Computational Thinking</h3>
                            <p class="video-description">Learn the core concepts of computational thinking and how they apply to problem-solving.</p>
                            <span class="video-duration">Duration: 12:00</span>
                        </div>
                    </div>
                </div>

                <!-- Video 2 -->
                <div class="content-section">
                    <div class="video-section">
                        <div class="video-player">
                            <div class="play-btn">
                                <svg width="30" height="30" viewBox="0 0 30 30" fill="none">
                                    <path d="M10 7L22 15L10 23V7Z" fill="currentColor"/>
                                </svg>
                            </div>
                        </div>
                        <div class="video-info">
                            <h3 class="video-title">Pattern Recognition</h3>
                            <p class="video-description">Discover how to identify patterns and relationships in data and problems.</p>
                            <span class="video-duration">Duration: 10:30</span>
                        </div>
                    </div>
                    
                    <!-- Activity Button after Video 2 -->
                    <div class="activity-button-section">
                        <button class="activity-button" onclick="startActivity('pattern-game')">
                            <div class="activity-thumbnail">
                                <svg width="40" height="40" viewBox="0 0 60 60" fill="none">
                                    <rect x="10" y="10" width="15" height="15" stroke="currentColor" stroke-width="2"/>
                                    <rect x="35" y="10" width="15" height="15" stroke="currentColor" stroke-width="2"/>
                                    <rect x="10" y="35" width="15" height="15" stroke="currentColor" stroke-width="2"/>
                                    <rect x="35" y="35" width="15" height="15" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="activity-content">
                                <h4>Pattern Recognition Game</h4>
                                <p>Practice identifying patterns in sequences and data</p>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Video 3 -->
                <div class="content-section">
                    <div class="video-section">
                        <div class="video-player">
                            <div class="play-btn">
                                <svg width="30" height="30" viewBox="0 0 30 30" fill="none">
                                    <path d="M10 7L22 15L10 23V7Z" fill="currentColor"/>
                                </svg>
                            </div>
                        </div>
                        <div class="video-info">
                            <h3 class="video-title">Decomposition & Abstraction</h3>
                            <p class="video-description">Learn to break down complex problems and focus on essential details.</p>
                            <span class="video-duration">Duration: 11:15</span>
                        </div>
                    </div>
                </div>

                <!-- Video 4 -->
                <div class="content-section">
                    <div class="video-section">
                        <div class="video-player">
                            <div class="play-btn">
                                <svg width="30" height="30" viewBox="0 0 30 30" fill="none">
                                    <path d="M10 7L22 15L10 23V7Z" fill="currentColor"/>
                                </svg>
                            </div>
                        </div>
                        <div class="video-info">
                            <h3 class="video-title">Algorithm Design</h3>
                            <p class="video-description">Create step-by-step solutions to solve problems systematically.</p>
                            <span class="video-duration">Duration: 9:45</span>
                        </div>
                    </div>
                    
                    <!-- Activity Button after Video 4 -->
                    <div class="activity-button-section">
                        <button class="activity-button" onclick="startActivity('algorithm-builder')">
                            <div class="activity-thumbnail">
                                <svg width="40" height="40" viewBox="0 0 60 60" fill="none">
                                    <rect x="15" y="10" width="30" height="8" rx="4" stroke="currentColor" stroke-width="2"/>
                                    <rect x="15" y="26" width="30" height="8" rx="4" stroke="currentColor" stroke-width="2"/>
                                    <rect x="15" y="42" width="30" height="8" rx="4" stroke="currentColor" stroke-width="2"/>
                                    <path d="M30 18V26M30 34V42" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="activity-content">
                                <h4>Algorithm Builder</h4>
                                <p>Create step-by-step solutions for everyday problems</p>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Assessment Button -->
                <div class="content-section">
                    <div class="assessment-button-section">
                        <button class="assessment-button" onclick="startAssessment()">
                            <div class="assessment-thumbnail">
                                <svg width="40" height="40" viewBox="0 0 60 60" fill="none">
                                    <rect x="15" y="10" width="30" height="40" rx="4" stroke="currentColor" stroke-width="2"/>
                                    <path d="M20 20L25 25L35 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <line x1="20" y1="30" x2="40" y2="30" stroke="currentColor" stroke-width="2"/>
                                    <line x1="20" y1="35" x2="35" y2="35" stroke="currentColor" stroke-width="2"/>
                                    <line x1="20" y1="40" x2="40" y2="40" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="assessment-content">
                                <h4>Module Assessment</h4>
                                <p>Test your computational thinking skills with interactive challenges</p>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Hidden containers for activities and quiz -->
                <div class="hidden-content" id="activities" style="display: none;">
                    <div class="activities-container">
                        <!-- Activities will be loaded by JavaScript -->
                    </div>
                </div>

                <div class="hidden-content" id="quiz" style="display: none;">
                    <div class="quiz-container">
                        <div class="quiz-progress">
                            <span>Question <span id="current-question">1</span> of <span id="total-questions">3</span></span>
                            <div class="quiz-progress-bar">
                                <div class="quiz-progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="question-container" id="question-container">
                            <!-- Quiz questions will be loaded by JavaScript -->
                        </div>
                        <div class="quiz-actions">
                            <button class="quiz-btn" id="prev-btn" onclick="previousQuestion()" disabled>Previous</button>
                            <button class="quiz-btn" id="next-btn" onclick="nextQuestion()">Next</button>
                            <button class="quiz-btn" id="submit-btn" onclick="submitQuiz()" style="display: none;">Submit Quiz</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../../js/modules.js"></script>
    <script src="../../js/activities.js"></script>
    <script src="../../js/progress.js"></script>
    <script>
        const currentModuleId = 2;
        
        document.addEventListener('DOMContentLoaded', () => {
            moduleManager.initializeModulePage(currentModuleId);
            moduleManager.createLessonViewer();
            
            // Add module 2 specific quiz questions
            window.moduleContent[2].quiz = {
                questions: [
                    {
                        id: 'q1',
                        text: 'What is pattern recognition in computational thinking?',
                        options: [
                            'Finding similarities and differences in data',
                            'Creating random patterns',
                            'Drawing geometric shapes',
                            'Memorizing sequences'
                        ],
                        correct: 0
                    },
                    {
                        id: 'q2',
                        text: 'Which is an example of decomposition?',
                        options: [
                            'Combining small problems into one big problem',
                            'Breaking a complex problem into smaller parts',
                            'Ignoring difficult problems',
                            'Solving everything at once'
                        ],
                        correct: 1
                    },
                    {
                        id: 'q3',
                        text: 'What is abstraction in computational thinking?',
                        options: [
                            'Making things more complicated',
                            'Adding more details',
                            'Focusing on important information and ignoring irrelevant details',
                            'Creating abstract art'
                        ],
                        correct: 2
                    }
                ]
            };
        });
        
        // New functions for the flow-based layout
        function startActivity(activityId) {
            const moduleFlow = document.querySelector('.module-flow');
            const activitiesContainer = document.getElementById('activities');
            
            // Hide the main flow and show activities
            moduleFlow.style.display = 'none';
            activitiesContainer.style.display = 'block';
            
            // Initialize the specific activity
            if (activityId === 'pattern-game') {
                loadPatternGame();
            } else if (activityId === 'algorithm-builder') {
                loadAlgorithmBuilder();
            }
        }
        
        function startAssessment() {
            const moduleFlow = document.querySelector('.module-flow');
            const quizContainer = document.getElementById('quiz');
            
            // Hide the main flow and show quiz
            moduleFlow.style.display = 'none';
            quizContainer.style.display = 'block';
            
            loadQuizQuestions();
        }
        
        function backToModule() {
            const moduleFlow = document.querySelector('.module-flow');
            const activitiesContainer = document.getElementById('activities');
            const quizContainer = document.getElementById('quiz');
            
            // Show the main flow and hide others
            moduleFlow.style.display = 'block';
            activitiesContainer.style.display = 'none';
            quizContainer.style.display = 'none';
        }
        
        function loadQuizQuestions() {
            const questions = window.moduleContent[2].quiz.questions;
            showQuestion(0);
        }
        
        function showQuestion(index) {
            const questions = window.moduleContent[2].quiz.questions;
            const question = questions[index];
            const container = document.getElementById('question-container');
            
            container.innerHTML = `
                <h3 class="question-text">${question.text}</h3>
                <div class="answer-options">
                    ${question.options.map((option, i) => `
                        <div class="answer-option ${quizAnswers[question.id] === i ? 'selected' : ''}" 
                             onclick="selectAnswer('${question.id}', ${i})">
                            ${option}
                        </div>
                    `).join('')}
                </div>
            `;
            
            // Update progress
            document.getElementById('current-question').textContent = index + 1;
            document.getElementById('total-questions').textContent = questions.length;
            document.querySelector('.quiz-progress-fill').style.width = `${((index + 1) / questions.length) * 100}%`;
            
            // Update buttons
            document.getElementById('prev-btn').disabled = index === 0;
            document.getElementById('next-btn').style.display = index === questions.length - 1 ? 'none' : 'inline-block';
            document.getElementById('submit-btn').style.display = index === questions.length - 1 ? 'inline-block' : 'none';
        }
        
        let currentQuestionIndex = 0;
        let quizAnswers = {};
        
        function selectAnswer(questionId, answerIndex) {
            quizAnswers[questionId] = answerIndex;
            
            // Update UI
            document.querySelectorAll('.answer-option').forEach((option, i) => {
                option.classList.toggle('selected', i === answerIndex);
            });
        }
        
        function nextQuestion() {
            const questions = window.moduleContent[2].quiz.questions;
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            }
        }
        
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
            }
        }
        
        function submitQuiz() {
            const questions = window.moduleContent[2].quiz.questions;
            let correct = 0;
            
            questions.forEach(question => {
                if (quizAnswers[question.id] === question.correct) {
                    correct++;
                }
            });
            
            const score = Math.round((correct / questions.length) * 100);
            
            // Mark quiz completed
            window.progressTracker.markQuizCompleted(currentModuleId, score);
            
            // Show results
            const container = document.getElementById('question-container');
            container.innerHTML = `
                <div class="quiz-results">
                    <h2>Quiz Complete!</h2>
                    <p class="score">Your Score: ${score}%</p>
                    <p>You got ${correct} out of ${questions.length} questions correct.</p>
                    ${score >= 70 ? 
                        '<p class="success">Great job! You\'ve passed the assessment.</p>' : 
                        '<p class="warning">Keep studying and try again to improve your score.</p>'
                    }
                    <button class="quiz-btn" onclick="backToModule()">Back to Module</button>
                </div>
            `;
            
            document.querySelector('.quiz-actions').style.display = 'none';
        }
        
        function loadPatternGame() {
            const container = document.querySelector('#activities .activities-container');
            container.innerHTML = `
                <div class="activity-card">
                    <div class="activity-header">
                        <h3 class="activity-title">Pattern Recognition Game</h3>
                        <button class="back-to-module-btn" onclick="backToModule()">Back to Module</button>
                    </div>
                    <p>Complete the patterns by finding the missing numbers!</p>
                    <div class="pattern-quiz">
                        <div class="pattern-grid">
                            ${generatePatternQuiz()}
                        </div>
                        <button class="activity-btn" onclick="checkPatterns()">Check Answers</button>
                        <div id="pattern-results"></div>
                    </div>
                </div>
            `;
        }
        
        function loadAlgorithmBuilder() {
            const container = document.querySelector('#activities .activities-container');
            container.innerHTML = `
                <div class="activity-card">
                    <div class="activity-header">
                        <h3 class="activity-title">Algorithm Builder</h3>
                        <button class="back-to-module-btn" onclick="backToModule()">Back to Module</button>
                    </div>
                    <p>Create a step-by-step algorithm to make a peanut butter and jelly sandwich!</p>
                    <div class="algorithm-builder">
                        <div class="steps-container" id="steps-container">
                            <div class="step">
                                <input type="text" placeholder="Step 1: What's the first thing to do?" class="step-input">
                                <button class="remove-step" onclick="removeStep(this)">×</button>
                            </div>
                        </div>
                        <button class="activity-btn" onclick="addStep()">Add Step</button>
                        <button class="activity-btn" onclick="testAlgorithm()">Test Algorithm</button>
                        <div id="algorithm-results"></div>
                    </div>
                </div>
            `;
        }
        
        function generatePatternQuiz() {
            const patterns = [
                { sequence: [2, 4, 6, '?'], answer: 8, rule: 'Add 2' },
                { sequence: [1, 3, 9, '?'], answer: 27, rule: 'Multiply by 3' },
                { sequence: [10, 8, 6, '?'], answer: 4, rule: 'Subtract 2' }
            ];
            
            return patterns.map((pattern, index) => `
                <div class="pattern-question">
                    <div class="sequence">
                        ${pattern.sequence.map(item => 
                            item === '?' ? 
                            `<input type="number" class="answer-input" data-correct="${pattern.answer}" data-index="${index}">` :
                            `<span class="sequence-item">${item}</span>`
                        ).join(' → ')}
                    </div>
                    <p class="pattern-hint">Find the pattern!</p>
                </div>
            `).join('');
        }
        
        function checkPatterns() {
            const inputs = document.querySelectorAll('.answer-input');
            let correct = 0;
            
            inputs.forEach(input => {
                const userAnswer = parseInt(input.value);
                const correctAnswer = parseInt(input.dataset.correct);
                
                if (userAnswer === correctAnswer) {
                    correct++;
                    input.style.borderColor = 'var(--success-color)';
                } else {
                    input.style.borderColor = 'var(--danger-color)';
                }
            });
            
            const score = Math.round((correct / inputs.length) * 100);
            const results = document.getElementById('pattern-results');
            
            if (score === 100) {
                window.aiLiteracy.completeActivity(currentModuleId, 'pattern-game');
                results.innerHTML = '<p class="success">Perfect! You\'ve mastered pattern recognition!</p>';
            } else {
                results.innerHTML = `<p class="warning">You got ${correct} out of ${inputs.length} correct. Try again!</p>`;
            }
        }
        
        function addStep() {
            const container = document.getElementById('steps-container');
            const stepCount = container.children.length + 1;
            const stepDiv = document.createElement('div');
            stepDiv.className = 'step';
            stepDiv.innerHTML = `
                <input type="text" placeholder="Step ${stepCount}: What's next?" class="step-input">
                <button class="remove-step" onclick="removeStep(this)">×</button>
            `;
            container.appendChild(stepDiv);
        }
        
        function removeStep(button) {
            button.parentElement.remove();
            updateStepNumbers();
        }
        
        function updateStepNumbers() {
            const steps = document.querySelectorAll('.step-input');
            steps.forEach((input, index) => {
                input.placeholder = `Step ${index + 1}: ${index === 0 ? "What's the first thing to do?" : "What's next?"}`;
            });
        }
        
        function testAlgorithm() {
            const steps = Array.from(document.querySelectorAll('.step-input')).map(input => input.value.trim());
            const validSteps = steps.filter(step => step.length > 0);
            const results = document.getElementById('algorithm-results');
            
            if (validSteps.length >= 3) {
                window.aiLiteracy.completeActivity(currentModuleId, 'algorithm-builder');
                results.innerHTML = `
                    <div class="success">
                        <h4>Great Algorithm!</h4>
                        <p>You created ${validSteps.length} clear steps. Your algorithm is ready to test!</p>
                        <ol>
                            ${validSteps.map(step => `<li>${step}</li>`).join('')}
                        </ol>
                    </div>
                `;
            } else {
                results.innerHTML = '<p class="warning">Please add at least 3 steps to complete your algorithm.</p>';
            }
        }
        
        // Additional functions for lesson plan
        function setupLessonPlanForm(activityId, moduleId) {
            const form = document.getElementById('lesson-plan-form');
            if (form) {
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    saveLessonPlan(activityId, moduleId);
                });
            }
        }
        
        function saveLessonPlan(activityId, moduleId) {
            const formData = new FormData(document.getElementById('lesson-plan-form'));
            const lessonPlan = {
                title: formData.get('title'),
                grade: formData.get('grade'),
                objectives: formData.get('objectives'),
                framework: formData.getAll('framework'),
                activities: formData.get('activities'),
                assessment: formData.get('assessment'),
                created: new Date().toISOString()
            };
            
            // Save to localStorage
            const plans = JSON.parse(localStorage.getItem('lessonPlans') || '[]');
            plans.push(lessonPlan);
            localStorage.setItem('lessonPlans', JSON.stringify(plans));
            
            // Complete activity
            window.aiLiteracy.completeActivity(moduleId, activityId);
            
            alert('Lesson plan saved successfully!');
        }
        
        function previewLessonPlan() {
            const formData = new FormData(document.getElementById('lesson-plan-form'));
            const preview = document.getElementById('lesson-preview');
            
            preview.innerHTML = `
                <div class="lesson-plan-preview">
                    <h3>Lesson Plan Preview</h3>
                    <div class="preview-content">
                        <h4>${formData.get('title')}</h4>
                        <p><strong>Grade Level:</strong> ${formData.get('grade')}</p>
                        <p><strong>Objectives:</strong><br>${formData.get('objectives')}</p>
                        <p><strong>UNESCO Framework:</strong> ${formData.getAll('framework').join(', ')}</p>
                        <p><strong>Activities:</strong><br>${formData.get('activities')}</p>
                        <p><strong>Assessment:</strong><br>${formData.get('assessment')}</p>
                    </div>
                    <button class="activity-btn" onclick="exportLessonPlan()">Export as PDF</button>
                </div>
            `;
            
            preview.scrollIntoView({ behavior: 'smooth' });
        }
        
        function exportLessonPlan() {
            alert('PDF export feature would be implemented here');
        }
        
        function checkRecommendations(activityId, moduleId) {
            const pairs = document.querySelectorAll('.friend-pair');
            if (pairs.length >= 2) {
                window.aiLiteracy.completeActivity(moduleId, activityId);
                alert('Great job creating friend recommendations based on shared interests!');
            } else {
                alert('Please create at least 2 friend recommendations.');
            }
        }
        
        // Add styles for module 2
        const style = document.createElement('style');
        style.textContent = `
            .algorithm-builder {
                background: var(--light-bg);
                padding: 2rem;
                border-radius: 1rem;
            }
            
            .steps-container {
                display: flex;
                flex-direction: column;
                gap: 1rem;
                margin: 2rem 0;
            }
            
            .step {
                display: flex;
                align-items: center;
                gap: 1rem;
                background: white;
                padding: 0.75rem;
                border-radius: 0.5rem;
                box-shadow: var(--shadow-sm);
            }
            
            .step-input {
                flex: 1;
                padding: 0.5rem;
                border: 2px solid var(--border-color);
                border-radius: 0.5rem;
                font-family: inherit;
            }
            
            .remove-step {
                background: var(--danger-color);
                color: white;
                border: none;
                border-radius: 50%;
                width: 30px;
                height: 30px;
                cursor: pointer;
                font-size: 1.2rem;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .success {
                color: var(--success-color);
                background: rgba(16, 185, 129, 0.1);
                padding: 1rem;
                border-radius: 0.5rem;
                margin-top: 1rem;
            }
            
            .warning {
                color: var(--warning-color);
                background: rgba(245, 158, 11, 0.1);
                padding: 1rem;
                border-radius: 0.5rem;
                margin-top: 1rem;
            }
            
            .activity-card {
                background: var(--card-bg);
                border-radius: 1rem;
                padding: 2rem;
                box-shadow: var(--shadow-md);
            }
            
            .activity-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1.5rem;
            }
            
            .back-to-module-btn {
                background: var(--text-secondary);
                color: white;
                border: none;
                padding: 0.5rem 1rem;
                border-radius: 0.5rem;
                cursor: pointer;
                font-size: 0.875rem;
            }
            
            .activity-btn {
                margin: 0.5rem 0.5rem 0.5rem 0;
                padding: 0.75rem 1.5rem;
                background: var(--gradient-primary);
                color: white;
                border: none;
                border-radius: 0.5rem;
                font-weight: 600;
                cursor: pointer;
            }
            
            .pattern-quiz {
                padding: 2rem;
                background: var(--light-bg);
                border-radius: 1rem;
            }
            
            .pattern-grid {
                display: flex;
                flex-direction: column;
                gap: 2rem;
                margin: 2rem 0;
            }
            
            .pattern-question {
                background: white;
                padding: 1.5rem;
                border-radius: 0.75rem;
                box-shadow: var(--shadow-sm);
            }
            
            .sequence {
                display: flex;
                align-items: center;
                gap: 1rem;
                font-size: 1.25rem;
                margin-bottom: 1rem;
            }
            
            .sequence-item {
                padding: 0.5rem 1rem;
                background: var(--primary-color);
                color: white;
                border-radius: 0.5rem;
                font-weight: 600;
            }
            
            .answer-input {
                width: 60px;
                padding: 0.5rem;
                border: 2px solid var(--border-color);
                border-radius: 0.5rem;
                text-align: center;
                font-size: 1.25rem;
                font-weight: 600;
            }
            
            .pattern-hint {
                color: var(--text-secondary);
                font-style: italic;
            }
            
            .lesson-plan-form {
                background: var(--light-bg);
                padding: 2rem;
                border-radius: 1rem;
            }
            
            .form-group {
                margin-bottom: 1.5rem;
            }
            
            .form-group label {
                display: block;
                font-weight: 600;
                margin-bottom: 0.5rem;
            }
            
            .form-group input,
            .form-group select,
            .form-group textarea {
                width: 100%;
                padding: 0.75rem;
                border: 2px solid var(--border-color);
                border-radius: 0.5rem;
                font-family: inherit;
            }
            
            .checkbox-group {
                display: flex;
                gap: 1rem;
                flex-wrap: wrap;
            }
            
            .checkbox-group label {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                font-weight: normal;
            }
            
            .form-actions {
                display: flex;
                gap: 1rem;
                margin-top: 2rem;
            }
            
            .lesson-plan-preview {
                margin-top: 2rem;
                padding: 2rem;
                background: white;
                border-radius: 0.75rem;
                box-shadow: var(--shadow-md);
            }
            
            .student-cards {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
                margin: 2rem 0;
            }
            
            .student-card {
                background: white;
                padding: 1.5rem;
                border-radius: 0.75rem;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s ease;
                border: 2px solid transparent;
            }
            
            .student-card:hover {
                transform: translateY(-4px);
                box-shadow: var(--shadow-md);
            }
            
            .student-card.selected {
                border-color: var(--primary-color);
                background: rgba(99, 102, 241, 0.05);
            }
            
            .student-avatar {
                width: 60px;
                height: 60px;
                background: var(--gradient-primary);
                color: white;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                font-weight: 700;
                margin: 0 auto 1rem;
            }
            
            .interests {
                display: flex;
                gap: 0.5rem;
                flex-wrap: wrap;
                justify-content: center;
                margin-top: 0.5rem;
            }
            
            .interest-tag {
                padding: 0.25rem 0.75rem;
                background: var(--light-bg);
                border-radius: 1rem;
                font-size: 0.75rem;
            }
            
            .recommendation-pairs {
                margin: 1rem 0;
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .friend-pair {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 0.75rem;
                background: var(--light-bg);
                border-radius: 0.5rem;
            }
            
            .remove-pair {
                margin-left: auto;
                background: var(--danger-color);
                color: white;
                border: none;
                border-radius: 50%;
                width: 24px;
                height: 24px;
                cursor: pointer;
            }
            
            .classification-demo {
                background: var(--light-bg);
                padding: 2rem;
                border-radius: 1rem;
            }
            
            .classification-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 1rem;
                margin: 2rem 0;
            }
            
            .classification-item {
                background: white;
                padding: 1rem;
                border-radius: 0.75rem;
                text-align: center;
                transition: all 0.3s ease;
            }
            
            .item-image {
                color: var(--primary-color);
                margin-bottom: 0.5rem;
            }
            
            .classify-btn {
                margin-top: 0.5rem;
                padding: 0.25rem 0.75rem;
                background: var(--primary-color);
                color: white;
                border: none;
                border-radius: 0.25rem;
                font-size: 0.875rem;
                cursor: pointer;
            }
            
            .classification-controls {
                display: flex;
                gap: 1rem;
                justify-content: center;
            }
            
            #classification-results {
                margin-top: 1rem;
                padding: 1rem;
                background: white;
                border-radius: 0.5rem;
                text-align: center;
            }
        `;
        document.head.appendChild(style);
        
        // Make functions available globally
        window.startQuiz = startQuiz;
        window.checkPatterns = checkPatterns;
        window.setupLessonPlanForm = setupLessonPlanForm;
        window.saveLessonPlan = saveLessonPlan;
        window.previewLessonPlan = previewLessonPlan;
        window.exportLessonPlan = exportLessonPlan;
        window.checkRecommendations = checkRecommendations;
    </script>
</body>
</html>