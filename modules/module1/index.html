<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 1: AI Fundamentals - AI Literacy Learning</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="../../css/modules.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1>Module 1: AI Fundamentals</h1>
            </div>
            <div class="nav-user">
                <button class="back-btn" onclick="moduleManager.goBack()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M12 5L7 10L12 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Back to Dashboard
                </button>
            </div>
        </div>
    </nav>

    <div class="module-page">
        <div class="module-content">
            <div class="module-header-detail">
                <div class="module-header-top">
                    <div>
                        <h2>AI Fundamentals</h2>
                        <p>Discover what AI is, how it works, and how it affects your daily life</p>
                    </div>
                    <div class="module-stats">
                        <span>Duration: 2 hours</span>
                        <span>Progress: <span class="progress-text">0%</span></span>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill module-progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div class="module-flow">
                <!-- Video 1 -->
                <div class="content-section">
                    <div class="video-section">
                        <div class="video-player">
                            <div class="play-btn">
                                <svg width="30" height="30" viewBox="0 0 30 30" fill="none">
                                    <path d="M10 7L22 15L10 23V7Z" fill="currentColor"/>
                                </svg>
                            </div>
                        </div>
                        <div class="video-info">
                            <h3 class="video-title">What is AI?</h3>
                            <p class="video-description">Learn the fundamentals of artificial intelligence and how it differs from traditional programming.</p>
                            <span class="video-duration">Duration: 10:30</span>
                        </div>
                    </div>
                </div>

                <!-- Video 2 -->
                <div class="content-section">
                    <div class="video-section">
                        <div class="video-player">
                            <div class="play-btn">
                                <svg width="30" height="30" viewBox="0 0 30 30" fill="none">
                                    <path d="M10 7L22 15L10 23V7Z" fill="currentColor"/>
                                </svg>
                            </div>
                        </div>
                        <div class="video-info">
                            <h3 class="video-title">How AI Learns</h3>
                            <p class="video-description">Discover the process of machine learning and how AI systems improve over time.</p>
                            <span class="video-duration">Duration: 12:15</span>
                        </div>
                    </div>
                    
                    <!-- Activity Button after Video 2 -->
                    <div class="activity-button-section">
                        <button class="activity-button" onclick="startActivity('classification-game')">
                            <div class="activity-thumbnail">
                                <svg width="40" height="40" viewBox="0 0 60 60" fill="none">
                                    <rect x="10" y="10" width="40" height="40" rx="8" stroke="currentColor" stroke-width="2"/>
                                    <circle cx="25" cy="25" r="8" fill="currentColor"/>
                                    <rect x="35" y="35" width="10" height="10" fill="currentColor"/>
                                </svg>
                            </div>
                            <div class="activity-content">
                                <h4>AI Classification Game</h4>
                                <p>Practice sorting items to understand how AI categorizes data</p>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Video 3 -->
                <div class="content-section">
                    <div class="video-section">
                        <div class="video-player">
                            <div class="play-btn">
                                <svg width="30" height="30" viewBox="0 0 30 30" fill="none">
                                    <path d="M10 7L22 15L10 23V7Z" fill="currentColor"/>
                                </svg>
                            </div>
                        </div>
                        <div class="video-info">
                            <h3 class="video-title">AI in Your Daily Life</h3>
                            <p class="video-description">Explore real-world examples of AI that you encounter every day.</p>
                            <span class="video-duration">Duration: 8:45</span>
                        </div>
                    </div>
                </div>

                <!-- Video 4 -->
                <div class="content-section">
                    <div class="video-section">
                        <div class="video-player">
                            <div class="play-btn">
                                <svg width="30" height="30" viewBox="0 0 30 30" fill="none">
                                    <path d="M10 7L22 15L10 23V7Z" fill="currentColor"/>
                                </svg>
                            </div>
                        </div>
                        <div class="video-info">
                            <h3 class="video-title">AI Ethics and Bias</h3>
                            <p class="video-description">Understand the ethical implications and potential biases in AI systems.</p>
                            <span class="video-duration">Duration: 9:00</span>
                        </div>
                    </div>
                    
                    <!-- Activity Button after Video 4 -->
                    <div class="activity-button-section">
                        <button class="activity-button" onclick="startActivity('bias-experience')">
                            <div class="activity-thumbnail">
                                <svg width="40" height="40" viewBox="0 0 60 60" fill="none">
                                    <circle cx="30" cy="25" r="15" stroke="currentColor" stroke-width="2"/>
                                    <path d="M15 45C15 35 21 30 30 30C39 30 45 35 45 45" stroke="currentColor" stroke-width="2"/>
                                    <path d="M25 20L35 20M25 25L35 25" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="activity-content">
                                <h4>AI Bias Experience</h4>
                                <p>Explore how bias can affect AI decisions and learn to identify it</p>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Assessment Button -->
                <div class="content-section">
                    <div class="assessment-button-section">
                        <button class="assessment-button" onclick="startAssessment()">
                            <div class="assessment-thumbnail">
                                <svg width="40" height="40" viewBox="0 0 60 60" fill="none">
                                    <rect x="15" y="10" width="30" height="40" rx="4" stroke="currentColor" stroke-width="2"/>
                                    <path d="M20 20L25 25L35 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <line x1="20" y1="30" x2="40" y2="30" stroke="currentColor" stroke-width="2"/>
                                    <line x1="20" y1="35" x2="35" y2="35" stroke="currentColor" stroke-width="2"/>
                                    <line x1="20" y1="40" x2="40" y2="40" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="assessment-content">
                                <h4>Module Assessment</h4>
                                <p>Test your knowledge with a comprehensive quiz on AI fundamentals</p>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Hidden containers for activities and quiz -->
                <div class="hidden-content" id="activities" style="display: none;">
                    <div class="activities-container">
                        <!-- Activities will be loaded by JavaScript -->
                    </div>
                </div>

                <div class="hidden-content" id="quiz" style="display: none;">
                    <div class="quiz-container">
                        <div class="quiz-progress">
                            <span>Question <span id="current-question">1</span> of <span id="total-questions">3</span></span>
                            <div class="quiz-progress-bar">
                                <div class="quiz-progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="question-container" id="question-container">
                            <!-- Quiz questions will be loaded by JavaScript -->
                        </div>
                        <div class="quiz-actions">
                            <button class="quiz-btn" id="prev-btn" onclick="previousQuestion()" disabled>Previous</button>
                            <button class="quiz-btn" id="next-btn" onclick="nextQuestion()">Next</button>
                            <button class="quiz-btn" id="submit-btn" onclick="submitQuiz()" style="display: none;">Submit Quiz</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../../js/modules.js"></script>
    <script src="../../js/activities.js"></script>
    <script src="../../js/progress.js"></script>
    <script>
        // Initialize module
        const currentModuleId = 1;
        
        // Quiz state
        let currentQuestionIndex = 0;
        let quizAnswers = {};
        
        document.addEventListener('DOMContentLoaded', () => {
            moduleManager.initializeModulePage(currentModuleId);
            loadQuizQuestions();
        });
        
        // Quiz functions
        function loadQuizQuestions() {
            const questions = window.moduleContent[1].quiz.questions;
            showQuestion(0);
        }
        
        function showQuestion(index) {
            const questions = window.moduleContent[1].quiz.questions;
            const question = questions[index];
            const container = document.getElementById('question-container');
            
            container.innerHTML = `
                <h3 class="question-text">${question.text}</h3>
                <div class="answer-options">
                    ${question.options.map((option, i) => `
                        <div class="answer-option ${quizAnswers[question.id] === i ? 'selected' : ''}" 
                             onclick="selectAnswer('${question.id}', ${i})">
                            ${option}
                        </div>
                    `).join('')}
                </div>
            `;
            
            // Update progress
            document.getElementById('current-question').textContent = index + 1;
            document.getElementById('total-questions').textContent = questions.length;
            document.querySelector('.quiz-progress-fill').style.width = `${((index + 1) / questions.length) * 100}%`;
            
            // Update buttons
            document.getElementById('prev-btn').disabled = index === 0;
            document.getElementById('next-btn').style.display = index === questions.length - 1 ? 'none' : 'inline-block';
            document.getElementById('submit-btn').style.display = index === questions.length - 1 ? 'inline-block' : 'none';
        }
        
        function selectAnswer(questionId, answerIndex) {
            quizAnswers[questionId] = answerIndex;
            
            // Update UI
            document.querySelectorAll('.answer-option').forEach((option, i) => {
                option.classList.toggle('selected', i === answerIndex);
            });
        }
        
        function nextQuestion() {
            const questions = window.moduleContent[1].quiz.questions;
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            }
        }
        
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
            }
        }
        
        function submitQuiz() {
            const questions = window.moduleContent[1].quiz.questions;
            let correct = 0;
            
            questions.forEach(question => {
                if (quizAnswers[question.id] === question.correct) {
                    correct++;
                }
            });
            
            const score = Math.round((correct / questions.length) * 100);
            
            // Mark quiz completed
            window.progressTracker.markQuizCompleted(currentModuleId, score);
            
            // Show results
            const container = document.getElementById('question-container');
            container.innerHTML = `
                <div class="quiz-results">
                    <h2>Quiz Complete!</h2>
                    <p class="score">Your Score: ${score}%</p>
                    <p>You got ${correct} out of ${questions.length} questions correct.</p>
                    ${score >= 70 ? 
                        '<p class="success">Great job! You\'ve passed the assessment.</p>' : 
                        '<p class="warning">Keep studying and try again to improve your score.</p>'
                    }
                    <button class="quiz-btn" onclick="location.reload()">Review Module</button>
                </div>
            `;
            
            document.querySelector('.quiz-actions').style.display = 'none';
        }
        
        // Additional helper functions for activities
        function generateBiasGamePhotos() {
            const photos = [
                { id: 1, description: 'Young woman', prediction: 'Student' },
                { id: 2, description: 'Middle-aged man', prediction: 'CEO' },
                { id: 3, description: 'Young man', prediction: 'Engineer' },
                { id: 4, description: 'Older woman', prediction: 'Doctor' },
                { id: 5, description: 'Person in wheelchair', prediction: 'Software Developer' },
                { id: 6, description: 'Person with glasses', prediction: 'Scientist' }
            ];
            
            return photos.map(photo => `
                <div class="photo-card" onclick="showPrediction(${photo.id})">
                    <div class="photo-placeholder">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                            <circle cx="40" cy="30" r="15" stroke="currentColor" stroke-width="2"/>
                            <path d="M20 65C20 52 28 45 40 45C52 45 60 52 60 65" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <p class="photo-description">${photo.description}</p>
                    <div class="prediction hidden" id="prediction-${photo.id}">
                        AI Prediction: ${photo.prediction}
                    </div>
                </div>
            `).join('');
        }
        
        function showPrediction(photoId) {
            const prediction = document.getElementById(`prediction-${photoId}`);
            prediction.classList.remove('hidden');
        }
        
        function setupBiasGame() {
            // Add styles for bias game
            const style = document.createElement('style');
            style.textContent = `
                .photo-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                    gap: 1rem;
                    margin: 2rem 0;
                }
                
                .photo-card {
                    background: var(--light-bg);
                    padding: 1rem;
                    border-radius: 0.75rem;
                    text-align: center;
                    cursor: pointer;
                    transition: all 0.3s ease;
                }
                
                .photo-card:hover {
                    transform: translateY(-4px);
                    box-shadow: var(--shadow-md);
                }
                
                .photo-placeholder {
                    color: var(--text-secondary);
                    margin-bottom: 0.5rem;
                }
                
                .prediction {
                    margin-top: 0.5rem;
                    padding: 0.5rem;
                    background: var(--primary-color);
                    color: white;
                    border-radius: 0.5rem;
                    font-weight: 600;
                }
                
                .prediction.hidden {
                    display: none;
                }
                
                .bias-discussion {
                    margin-top: 2rem;
                    padding: 1.5rem;
                    background: var(--light-bg);
                    border-radius: 0.75rem;
                }
                
                .reflection-input {
                    width: 100%;
                    min-height: 100px;
                    padding: 0.75rem;
                    border: 2px solid var(--border-color);
                    border-radius: 0.5rem;
                    margin-top: 1rem;
                    font-family: inherit;
                }
                
                .activity-btn {
                    margin-top: 1rem;
                    padding: 0.75rem 1.5rem;
                    background: var(--gradient-primary);
                    color: white;
                    border: none;
                    border-radius: 0.5rem;
                    font-weight: 600;
                    cursor: pointer;
                }
            `;
            document.head.appendChild(style);
        }
        
        function submitReflection(activityId, moduleId) {
            const reflection = document.querySelector('.reflection-input').value;
            if (reflection.trim().length > 10) {
                window.aiLiteracy.completeActivity(moduleId, activityId);
                alert('Reflection submitted successfully!');
            } else {
                alert('Please write a more detailed reflection.');
            }
        }
        
        function generateFishImages() {
            const items = [
                { id: 1, type: 'fish', name: 'Goldfish' },
                { id: 2, type: 'shark', name: 'Great White' },
                { id: 3, type: 'fish', name: 'Clownfish' },
                { id: 4, type: 'fish', name: 'Tuna' },
                { id: 5, type: 'shark', name: 'Hammerhead' },
                { id: 6, type: 'fish', name: 'Salmon' }
            ];
            
            return items.map(item => `
                <div class="classification-item" data-type="${item.type}" data-id="${item.id}">
                    <div class="item-image">
                        <svg width="60" height="40" viewBox="0 0 60 40" fill="none">
                            <ellipse cx="30" cy="20" rx="25" ry="15" stroke="currentColor" stroke-width="2"/>
                            <path d="M5 20L0 15V25L5 20Z" fill="currentColor"/>
                            ${item.type === 'shark' ? '<path d="M30 5L35 0L40 5" fill="currentColor"/>' : ''}
                        </svg>
                    </div>
                    <p>${item.name}</p>
                    <button class="classify-btn" onclick="classifyItem(${item.id}, '${item.type}')">
                        ${item.type === 'fish' ? 'Fish' : 'Shark'}
                    </button>
                </div>
            `).join('');
        }
        
        function trainClassifier(activityId) {
            const results = document.getElementById('classification-results');
            results.innerHTML = '<p>Training AI classifier... Done!</p><p>The AI has learned to distinguish between fish and sharks.</p>';
        }
        
        function testClassifier(activityId, moduleId) {
            const results = document.getElementById('classification-results');
            results.innerHTML = '<p>Testing classifier... 100% accuracy!</p><p>Great job training the AI!</p>';
            window.aiLiteracy.completeActivity(moduleId, activityId);
        }
        
        // New functions for the flow-based layout
        function startActivity(activityId) {
            const moduleFlow = document.querySelector('.module-flow');
            const activitiesContainer = document.getElementById('activities');
            
            // Hide the main flow and show activities
            moduleFlow.style.display = 'none';
            activitiesContainer.style.display = 'block';
            
            // Initialize the specific activity
            if (activityId === 'classification-game') {
                loadClassificationGame();
            } else if (activityId === 'bias-experience') {
                loadBiasExperience();
            }
        }
        
        function startAssessment() {
            const moduleFlow = document.querySelector('.module-flow');
            const quizContainer = document.getElementById('quiz');
            
            // Hide the main flow and show quiz
            moduleFlow.style.display = 'none';
            quizContainer.style.display = 'block';
            
            loadQuizQuestions();
        }
        
        function backToModule() {
            const moduleFlow = document.querySelector('.module-flow');
            const activitiesContainer = document.getElementById('activities');
            const quizContainer = document.getElementById('quiz');
            
            // Show the main flow and hide others
            moduleFlow.style.display = 'block';
            activitiesContainer.style.display = 'none';
            quizContainer.style.display = 'none';
        }
        
        function loadClassificationGame() {
            const container = document.querySelector('#activities .activities-container');
            container.innerHTML = `
                <div class="activity-card">
                    <div class="activity-header">
                        <h3 class="activity-title">AI Classification Game</h3>
                        <button class="back-to-module-btn" onclick="backToModule()">Back to Module</button>
                    </div>
                    <p>Help train an AI to classify different types of sea creatures!</p>
                    <div class="classification-game">
                        <div class="classification-items">
                            ${generateFishImages()}
                        </div>
                        <div class="classification-controls">
                            <button class="activity-btn" onclick="trainClassifier('classification-game')">Train AI</button>
                            <button class="activity-btn" onclick="testClassifier('classification-game', ${currentModuleId})">Test Classifier</button>
                        </div>
                        <div id="classification-results"></div>
                    </div>
                </div>
            `;
        }
        
        function loadBiasExperience() {
            const container = document.querySelector('#activities .activities-container');
            setupBiasGame();
            container.innerHTML = `
                <div class="activity-card">
                    <div class="activity-header">
                        <h3 class="activity-title">AI Bias Experience</h3>
                        <button class="back-to-module-btn" onclick="backToModule()">Back to Module</button>
                    </div>
                    <p>Click on each photo to see what an AI might predict about these people. Think about whether these predictions seem fair.</p>
                    <div class="photo-grid">
                        ${generateBiasGamePhotos()}
                    </div>
                    <div class="bias-discussion">
                        <h4>Reflection</h4>
                        <p>What patterns did you notice in the AI's predictions? How might this bias affect real people?</p>
                        <textarea class="reflection-input" placeholder="Share your thoughts about AI bias..."></textarea>
                        <button class="activity-btn" onclick="submitReflection('bias-experience', ${currentModuleId})">Submit Reflection</button>
                    </div>
                </div>
            `;
        }

        // Make functions globally available
        window.generateBiasGamePhotos = generateBiasGamePhotos;
        window.showPrediction = showPrediction;
        window.setupBiasGame = setupBiasGame;
        window.submitReflection = submitReflection;
        window.generateFishImages = generateFishImages;
        window.trainClassifier = trainClassifier;
        window.testClassifier = testClassifier;
        window.nextQuestion = nextQuestion;
        window.previousQuestion = previousQuestion;
        window.submitQuiz = submitQuiz;
        window.selectAnswer = selectAnswer;
        window.startActivity = startActivity;
        window.startAssessment = startAssessment;
        window.backToModule = backToModule;
    </script>
</body>
</html>